# 实验结果：SJS-2D 合成数据集性能评测（exp2_sjs_adv_d2）

## 0. 实验元信息

- 实验标签：`exp2_sjs_adv_d2`
- 运行时间戳：`2026-02-24T18:36:04+00:00`
- 构建类型：`Release`
- 线程数：`1`
- 每个点位重复次数：`3`
- 运行随机种子：`seed=1`
- 数据生成器：`alacarte_rectgen`（`gen_seed=1`）
- 审计抽样：`audit_pairs=2000000`（`audit_seed=1`）
- 运行签名：`c4df5cfa`

## 1. 任务、数据与评测口径

### 1.1 任务定义

给定两组二维矩形集合 $R$ 与 $S$（本实验中 $|R|=|S|=N$），连接关系定义为相交谓词：
$$
J = \{(r,s) \mid r\in R,\ s\in S,\ r\cap s\neq \varnothing\}.
$$

实验目标是在给定采样规模 $t$ 的条件下，从 $J$ 中产生 $t$ 个样本对（采样输出规模等于 $t$）。

### 1.2 数据生成与数据族

- 维度：$d=2$
- 数据族（同一组参数点位在同一数据族上生成数据集，并对全部方法复用该数据集）  
  - **F0**：`fixed,0.25,0.0`
  - **F1**：`lognormal,1.0,1.0`

### 1.3 对比方法（模型标识与简称）

| 简称 | 结果表中的 model 字段 |
|---|---|
| SJS-Sampling | `ours/sampling` |
| SJS-Adaptive | `ours/adaptive` |
| SJS-Enum | `ours/enum_sampling` |
| RT-Sampling | `range_tree/sampling` |
| RT-Adaptive | `range_tree/adaptive` |
| RT-Enum | `range_tree/enum_sampling` |
| KD-Sampling | `kd_tree/sampling` |

### 1.4 统计口径与指标定义

每个参数点位对每个模型重复运行 3 次；报告值以 **中位数（median）** 表示。

- **端到端耗时**：`wall_ms`（单位：ms）
- **查询/采样阶段耗时**：`run_sample_ms`（单位：ms）  
  本章中将 `run_sample_ms` 作为 **query 时间**。
- **速度提升**：统一使用 $T_{baseline}/T_{target}$ 的形式  
  例如 `speedup(KD/SJS)=T_{KD}/T_{SJS}`，大于 1 表示 SJS 更快。

关于枚举模型（SJS-Enum / RT-Enum）的时间口径：
- 枚举成本计入 `wall_ms`（以及相应的计数阶段），`run_sample_ms` 仅表示在“已枚举结果”上的取样耗时。

### 1.5 参数扫描（sweep）与固定阈值

固定阈值与配置：
- 预算阈值：`B_TH=50000000`
- 小阈值：`W_SMALL_TH=512`
- 枚举上限：`enum_cap=0`（所有枚举均未发生截断：`enum_truncated=0`）

参数扫描集合：
- **A（α_out 扫描）**：`ALPHAS_A=0.1 0.3 1 3 10 30 100 300 1000`，`N_A=1000000`，`T_A=10000000`
- **B（N 扫描）**：`NS_B=100000 200000 500000 1000000 2000000 5000000`，`ALPHA_B=200`，`T_B=10000000`
- **C（t 扫描）**：`TS_C=1000000 3000000 10000000 30000000 100000000 300000000 1000000000`，`N_C=1000000`，`ALPHA_C=200`
- **D（数据族敏感性）**：`N_D=1000000`，`ALPHA_D=200`，`T_D=10000000`（分别在 F0 与 F1 上运行）
- **E（预算诊断）**：`TS_E=100000 300000`，`BUDGETS_E=10000000 20000000 50000000 100000000`，`W_SMALLS_E=256 512 1024`
- **F（高密度补充）**：`ALPHAS_F=1000 3000 10000`，`N_F=1000000`，`T_F=1000000`

## 2. 数据完整性与成功率

- 失败任务数：`0`

| 文件 | 总行数 | OK行数 | OK率 |
|---|---:|---:|---:|
| A_alpha_F0_merged.csv | 188 | 188 | 100.0% |
| A_alpha_F1_merged.csv | 189 | 189 | 100.0% |
| B_N_F0_merged.csv | 125 | 125 | 100.0% |
| C_t_F0_merged.csv | 146 | 146 | 100.0% |
| D_family_F0_merged.csv | 20 | 20 | 100.0% |
| D_family_F1_merged.csv | 21 | 21 | 100.0% |
| E_budget_F0_merged.csv | 294 | 294 | 100.0% |
| F_high_alpha_F0_merged.csv | 45 | 45 | 100.0% |

## 3. 数据集 join 规模（|J|）

下表给出本次实验中出现的全部数据集及其 join 规模 $|J|$（精确计数；所有运行记录 `count_exact=1`）。

| 数据集ID | Family | N | α_out | $\vert J \vert$ |
|---|---|---:|---:|---:|
| d2_F0_n100000_a200_gs1 | F0 | 100,000 | 200 | 39,707,800 |
| d2_F0_n1000000_a0p1_gs1 | F0 | 1,000,000 | 0.1 | 198,960 |
| d2_F0_n1000000_a0p3_gs1 | F0 | 1,000,000 | 0.3 | 749,610 |
| d2_F0_n1000000_a1_gs1 | F0 | 1,000,000 | 1 | 2,465,984 |
| d2_F0_n1000000_a3_gs1 | F0 | 1,000,000 | 3 | 7,226,532 |
| d2_F0_n1000000_a10_gs1 | F0 | 1,000,000 | 10 | 23,492,958 |
| d2_F0_n1000000_a30_gs1 | F0 | 1,000,000 | 30 | 67,716,388 |
| d2_F0_n1000000_a100_gs1 | F0 | 1,000,000 | 100 | 197,679,100 |
| d2_F0_n1000000_a200_gs1 | F0 | 1,000,000 | 200 | 396,399,000 |
| d2_F0_n1000000_a300_gs1 | F0 | 1,000,000 | 300 | 587,209,800 |
| d2_F0_n1000000_a1000_gs1 | F0 | 1,000,000 | 1000 | 1,953,920,800 |
| d2_F0_n1000000_a3000_gs1 | F0 | 1,000,000 | 3000 | 5,861,671,100 |
| d2_F0_n1000000_a10000_gs1 | F0 | 1,000,000 | 10000 | 19,527,267,800 |
| d2_F0_n200000_a200_gs1 | F0 | 200,000 | 200 | 79,444,400 |
| d2_F0_n500000_a200_gs1 | F0 | 500,000 | 200 | 198,105,800 |
| d2_F0_n2000000_a200_gs1 | F0 | 2,000,000 | 200 | 792,788,600 |
| d2_F0_n5000000_a200_gs1 | F0 | 5,000,000 | 200 | 1,982,695,800 |
| d2_F1_n1000000_a0p1_gs1 | F1 | 1,000,000 | 0.1 | 243,656 |
| d2_F1_n1000000_a0p3_gs1 | F1 | 1,000,000 | 0.3 | 849,238 |
| d2_F1_n1000000_a1_gs1 | F1 | 1,000,000 | 1 | 2,820,304 |
| d2_F1_n1000000_a3_gs1 | F1 | 1,000,000 | 3 | 8,285,104 |
| d2_F1_n1000000_a10_gs1 | F1 | 1,000,000 | 10 | 28,025,484 |
| d2_F1_n1000000_a30_gs1 | F1 | 1,000,000 | 30 | 81,998,686 |
| d2_F1_n1000000_a100_gs1 | F1 | 1,000,000 | 100 | 241,688,198 |
| d2_F1_n1000000_a200_gs1 | F1 | 1,000,000 | 200 | 483,677,900 |
| d2_F1_n1000000_a300_gs1 | F1 | 1,000,000 | 300 | 721,215,500 |
| d2_F1_n1000000_a1000_gs1 | F1 | 1,000,000 | 1000 | 2,390,980,100 |

## 4. 全局结果概览

### 4.1 分组胜率与中位数 speedup（按 sweep）

“SJS(s+a)” 指对同一点位在 **SJS-Sampling 与 SJS-Adaptive** 中取更快者（分别对 wall 与 query 独立取最小值）。

注意：在 **E_budget_F0** 中，KD-Sampling 仅在 2 个点位上运行，因此 “vs KD” 的分母为 2。

| Sweep | 点位数 | SJS(s+a) vs KD：wall | SJS(s+a) vs KD：query | median speedup(query, KD/SJS) | median speedup(wall, KD/SJS) | SJS(s+a) vs 全部模型：wall | SJS(s+a) vs 全部模型：query |
|---|---:|---|---|---:|---:|---|---|
| A_alpha_F0 | 9 | 1/9 | 8/9 | 1.466× | 0.435× | 1/9 | 2/9 |
| A_alpha_F1 | 9 | 2/9 | 9/9 | 2.253× | 0.817× | 2/9 | 2/9 |
| B_N_F0 | 6 | 3/6 | 6/6 | 1.425× | 0.793× | 3/6 | 4/6 |
| C_t_F0 | 7 | 3/7 | 6/7 | 1.326× | 0.766× | 3/7 | 3/7 |
| D_family_F0 | 1 | 0/1 | 1/1 | 1.310× | 0.801× | 0/1 | 1/1 |
| D_family_F1 | 1 | 1/1 | 1/1 | 3.518× | 2.269× | 1/1 | 1/1 |
| E_budget_F0 | 24 | 0/2 | 0/2 | 0.297× | 0.557× | 22/24 | 22/24 |
| F_high_alpha_F0 | 3 | 3/3 | 3/3 | 74.568× | 0.951× | 1/3 | 0/3 |

### 4.2 汇总统计（跨 sweep）

在 KD 可比的 38 个参数点位上，SJS(s+a) 的查询阶段耗时（query=run_sample_ms）更快的点位数为 34，胜率为 89.5%；端到端耗时（wall_ms）更快的点位数为 13，胜率为 34.2%。  
查询阶段 speedup（$\text{speedup}=T_{KD}/T_{SJS}$）的中位数为 1.425×，最小值为 0.162×，最大值为 131.874×。  
端到端 speedup（$\text{speedup}=T_{KD}/T_{SJS}$）的中位数为 0.793×，最小值为 0.268×，最大值为 6.119×。  
在全部 60 个参数点位上，SJS(s+a) 取得最小 query 的点位数为 22（36.7%）；取得最小 wall 的点位数为 29（48.3%）。  
将对比模型限定为“非枚举模型”（不含 SJS-Enum 与 RT-Enum）后，SJS(s+a) 取得最小 query 的点位数为 42（70.0%）。

### 4.3 KD 可比点位中 query 指标落后的全部点位

KD 可比点位上，SJS(s+a) 在 query 指标上落后的点位共 4 个，完整列表如下：

| Sweep | Family | N | α_out | t | B | w_small | SJS(s+a) query | KD query | speedup(KD/SJS) |
|---|---|---:|---:|---:|---:|---:|---|---|---:|
| A_alpha_F0 | F0 | 1,000,000 | 30 | 10,000,000 | 50,000,000 | 512 | SJS-Adaptive / 2,006.142 ms | 1,849.331 ms | 0.922× |
| C_t_F0 | F0 | 1,000,000 | 200 | 1,000,000 | 50,000,000 | 512 | SJS-Sampling / 14,150.039 ms | 14,077.618 /。ms | 0.995× |
| E_budget_F0 | F0 | 1,000,000 | 200 | 100,000 | 50,000,000 | 512 | SJS-Sampling / 10,505.095 ms | 1,699.438 ms | 0.162× |
| E_budget_F0 | F0 | 1,000,000 | 200 | 300,000 | 50,000,000 | 512 | SJS-Sampling / 6,054.130 ms | 2,615.630 ms | 0.432× |

## 5. 分组结果（逐 sweep 展示）

本节为每个 sweep 给出两类表格：
- **汇总对比表**：包含最优模型、SJS(s+a) 与 KD 的 speedup。
- **全模型中位数表**：给出该 sweep 中每个点位、每个模型的中位数耗时（query 与 wall 分开列出）。

### 5.1 A：α_out 扫描（A_alpha_F0 / A_alpha_F1）

#### A_alpha_F0（Family=F0，N=1,000,000，t=10,000,000，B=50,000,000，w_small=512）

要点：
- 点位数：9
- SJS(s+a) vs KD：query 8/9（median speedup 1.466×），wall 1/9（median speedup 0.435×）
- SJS(s+a) vs 全部模型：query 2/9，wall 1/9

**汇总对比表**

| α_out | $\vert J \vert$ | 最优 wall | 最优 query | SJS(s+a) wall | KD wall | wall_speedup(KD/SJS) | SJS(s+a) query | KD query | query_speedup(KD/SJS) |
|---|---|---|---|---|---|---|---|---|---|
| 0.1 | 198,960 | KD-Sampling / 2,050.6 ms | SJS-Enum / 24.822 ms | SJS-Sampling / 7,652.1 ms | 2,050.6 ms | 0.268× | SJS-Adaptive / 1,109.789 ms | 1,131.442 ms | 1.020× |
| 0.3 | 749,610 | KD-Sampling / 2,045.3 ms | SJS-Enum / 25.554 ms | SJS-Sampling / 7,653.7 ms | 2,045.3 ms | 0.267× | SJS-Adaptive / 1,112.248 ms | 1,122.114 ms | 1.009× |
| 1 | 2,465,984 | KD-Sampling / 2,035.7 ms | SJS-Enum / 25.594 ms | SJS-Sampling / 7,640.1 ms | 2,035.7 ms | 0.266× | SJS-Adaptive / 1,138.570 ms | 1,158.127 ms | 1.017× |
| 3 | 7,226,532 | KD-Sampling / 1,965.8 ms | SJS-Enum / 25.818 ms | SJS-Sampling / 7,644.7 ms | 1,965.8 ms | 0.257× | SJS-Adaptive / 1,242.600 ms | 1,267.887 ms | 1.020× |
| 10 | 23,492,958 | KD-Sampling / 2,062.2 ms | SJS-Enum / 26.083 ms | SJS-Sampling / 7,572.6 ms | 2,062.2 ms | 0.272× | SJS-Adaptive / 1,568.431 ms | 1,856.331 ms | 1.184× |
| 30 | 67,716,388 | KD-Sampling / 2,456.6 ms | SJS-Enum / 25.950 ms | SJS-Sampling / 7,337.5 ms | 2,456.6 ms | 0.335× | SJS-Adaptive / 2,006.142 ms | 1,849.331 ms | 0.922× |
| 100 | 197,679,100 | KD-Sampling / 4,079.3 ms | SJS-Enum / 25.243 ms | SJS-Sampling / 6,872.1 ms | 4,079.3 ms | 0.594× | SJS-Adaptive / 2,898.707 ms | 2,545.386 ms | 0.878× |
| 300 | 587,209,800 | KD-Sampling / 12,848.1 ms | SJS-Enum / 26.034 ms | SJS-Sampling / 10,251.1 ms | 12,848.1 ms | 1.254× | SJS-Sampling / 4,167.425 ms | 9,029.873 ms | 2.167× |
| 1000 | 1,953,920,800 | SJS-Sampling / 16,993.8 ms | SJS-Enum / 26.588 ms | SJS-Sampling / 16,993.8 ms | 39,374.6 ms | 2.317× | SJS-Sampling / 3,772.998 ms | 27,880.955 ms | 7.390× |

**全模型 query 中位数表（run_sample_ms, ms）**

| α_out | $\vert J \vert$ | SJS-Sampling | SJS-Adaptive | SJS-Enum | RT-Sampling | RT-Adaptive | RT-Enum | KD-Sampling |
|---|---|---:|---:|---:|---:|---:|---:|---:|
| 0.1 | 198,960 | 4,601.892 | 1,109.789 | 24.822 | 15,089.842 | 5,641.532 | 23.545 | 1,131.442 |
| 0.3 | 749,610 | 4,607.764 | 1,112.248 | 25.554 | 15,084.395 | 5,547.865 | 23.626 | 1,122.114 |
| 1 | 2,465,984 | 4,606.751 | 1,138.570 | 25.594 | 15,076.920 | 5,559.501 | 23.743 | 1,158.127 |
| 3 | 7,226,532 | 4,605.285 | 1,242.600 | 25.818 | 15,020.927 | 5,419.024 | 24.109 | 1,267.887 |
| 10 | 23,492,958 | 4,619.636 | 1,568.431 | 26.083 | 14,986.650 | 4,979.709 | 25.145 | 1,856.331 |
| 30 | 67,716,388 | 4,600.455 | 2,006.142 | 25.950 | 14,872.736 | 4,305.366 | 27.850 | 1,849.331 |
| 100 | 197,679,100 | 4,216.509 | 2,898.707 | 25.243 | 14,690.103 | 4,136.074 | 37.125 | 2,545.386 |
| 300 | 587,209,800 | 4,167.425 | 3,593.404 | 26.034 | 15,120.766 | 5,083.116 | 83.044 | 9,029.873 |
| 1000 | 1,953,920,800 | 3,772.998 | 10,265.691 | 26.588 | 15,714.700 | 11,127.085 | 278.536 | 27,880.955 |

**全模型 wall 中位数表（wall_ms, ms）**

| α_out | $\vert J \vert$ | SJS-Sampling | SJS-Adaptive | SJS-Enum | RT-Sampling | RT-Adaptive | RT-Enum | KD-Sampling |
|---|---|---:|---:|---:|---:|---:|---:|---:|
| 0.1 | 198,960 | 7,652.1 | 13,074.8 | 225,165.0 | 15,090.4 | 30,020.2 | 91,211.2 | 2,050.6 |
| 0.3 | 749,610 | 7,653.7 | 12,874.9 | 225,730.0 | 15,085.0 | 30,002.6 | 110,052.0 | 2,045.3 |
| 1 | 2,465,984 | 7,640.1 | 12,464.0 | 223,768.0 | 15,077.5 | 29,756.0 | 105,063.4 | 2,035.7 |
| 3 | 7,226,532 | 7,644.7 | 11,376.2 | 220,532.0 | 15,021.4 | 29,217.4 | 108,269.4 | 1,965.8 |
| 10 | 23,492,958 | 7,572.6 | 9,461.5 | 218,265.0 | 14,987.2 | 28,294.2 | 101,817.4 | 2,062.2 |
| 30 | 67,716,388 | 7,337.5 | 9,320.4 | 218,194.0 | 14,873.2 | 27,173.0 | 123,069.4 | 2,456.6 |
| 100 | 197,679,100 | 6,872.1 | 8,674.2 | 217,487.0 | 14,690.7 | 26,336.5 | 116,908.7 | 4,079.3 |
| 300 | 587,209,800 | 10,251.1 | 12,493.1 | 217,470.0 | 15,121.3 | 25,818.7 | 105,864.0 | 12,848.1 |
| 1000 | 1,953,920,800 | 16,993.8 | 26,346.6 | 214,361.0 | 15,715.2 | 25,580.5 | 111,248.5 | 39,374.6 |

#### A_alpha_F1（Family=F1，N=1,000,000，t=10,000,000，B=50,000,000，w_small=512）

要点：
- 点位数：9
- SJS(s+a) vs KD：query 9/9（median speedup 2.253×），wall 2/9（median speedup 0.817×）
- SJS(s+a) vs 全部模型：query 2/9，wall 2/9

**汇总对比表**

| α_out | $\vert J \vert$ | 最优 wall | 最优 query | SJS(s+a) wall | KD wall | wall_speedup(KD/SJS) | SJS(s+a) query | KD query | query_speedup(KD/SJS) |
|---|---|---|---|---|---|---|---|---|---|
| 0.1 | 243,656 | KD-Sampling / 2,155.8 ms | SJS-Enum / 23.589 ms | SJS-Sampling / 7,350.8 ms | 2,155.8 ms | 0.293× | SJS-Adaptive / 680.042 ms | 1,529.384 ms | 2.249× |
| 0.3 | 849,238 | KD-Sampling / 2,158.3 ms | SJS-Enum / 23.873 ms | SJS-Sampling / 7,345.8 ms | 2,158.3 ms | 0.294× | SJS-Adaptive / 679.472 ms | 1,526.851 ms | 2.247× |
| 1 | 2,820,304 | KD-Sampling / 2,149.7 ms | SJS-Enum / 23.816 ms | SJS-Sampling / 7,353.5 ms | 2,149.7 ms | 0.292× | SJS-Adaptive / 680.420 ms | 1,531.902 ms | 2.251× |
| 3 | 8,285,104 | KD-Sampling / 2,142.1 ms | SJS-Enum / 23.933 ms | SJS-Sampling / 7,299.1 ms | 2,142.1 ms | 0.293× | SJS-Adaptive / 681.838 ms | 1,538.845 ms | 2.257× |
| 10 | 28,025,484 | KD-Sampling / 2,148.1 ms | SJS-Enum / 23.980 ms | SJS-Sampling / 7,327.0 ms | 2,148.1 ms | 0.293× | SJS-Adaptive / 693.195 ms | 1,625.252 ms | 2.344× |
| 30 | 81,998,686 | KD-Sampling / 2,367.8 ms | SJS-Enum / 23.948 ms | SJS-Sampling / 7,194.8 ms | 2,367.8 ms | 0.329× | SJS-Adaptive / 800.582 ms | 1,924.917 ms | 2.404× |
| 100 | 241,688,198 | KD-Sampling / 3,745.4 ms | SJS-Enum / 23.825 ms | SJS-Sampling / 6,857.7 ms | 3,745.4 ms | 0.546× | SJS-Adaptive / 1,113.271 ms | 3,381.507 ms | 3.037× |
| 300 | 721,215,500 | KD-Sampling / 10,763.9 ms | SJS-Enum / 23.886 ms | SJS-Sampling / 9,912.6 ms | 10,763.9 ms | 1.086× | SJS-Sampling / 1,801.281 ms | 7,439.903 ms | 4.131× |
| 1000 | 2,390,980,100 | SJS-Sampling / 14,049.8 ms | SJS-Enum / 24.277 ms | SJS-Sampling / 14,049.8 ms | 85,969.7 ms | 6.119× | SJS-Sampling / 1,725.624 ms | 22,763.427 ms | 13.190× |

**全模型 query 中位数表（run_sample_ms, ms）**

| α_out | $\vert J \vert$ | SJS-Sampling | SJS-Adaptive | SJS-Enum | RT-Sampling | RT-Adaptive | RT-Enum | KD-Sampling |
|---|---|---:|---:|---:|---:|---:|---:|---:|
| 0.1 | 243,656 | 4,582.432 | 680.042 | 23.589 | 15,293.980 | 5,791.053 | 22.787 | 1,529.384 |
| 0.3 | 849,238 | 4,595.343 | 679.472 | 23.873 | 15,270.438 | 5,801.577 | 22.852 | 1,526.851 |
| 1 | 2,820,304 | 4,593.749 | 680.420 | 23.816 | 15,283.803 | 5,801.037 | 23.326 | 1,531.902 |
| 3 | 8,285,104 | 4,595.496 | 681.838 | 23.933 | 15,331.875 | 5,841.663 | 24.868 | 1,538.845 |
| 10 | 28,025,484 | 4,594.392 | 693.195 | 23.980 | 15,497.629 | 5,924.440 | 29.587 | 1,625.252 |
| 30 | 81,998,686 | 4,591.391 | 800.582 | 23.948 | 16,111.269 | 6,073.891 | 41.043 | 1,924.917 |
| 100 | 241,688,198 | 4,171.634 | 1,113.271 | 23.825 | 16,389.231 | 6,688.525 | 78.168 | 3,381.507 |
| 300 | 721,215,500 | 1,801.281 | 3,620.192 | 23.886 | 19,218.471 | 11,367.966 | 193.286 | 7,439.903 |
| 1000 | 2,390,980,100 | 1,725.624 | 6,022.826 | 24.277 | 20,252.366 | 15,354.410 | 560.898 | 22,763.427 |

**全模型 wall 中位数表（wall_ms, ms）**

| α_out | $\vert J \vert$ | SJS-Sampling | SJS-Adaptive | SJS-Enum | RT-Sampling | RT-Adaptive | RT-Enum | KD-Sampling |
|---|---|---:|---:|---:|---:|---:|---:|---:|
| 0.1 | 243,656 | 7,350.8 | 18,058.6 | 206,995.0 | 15,294.5 | 30,547.0 | 97,653.2 | 2,155.8 |
| 0.3 | 849,238 | 7,345.8 | 17,911.5 | 207,271.0 | 15,271.0 | 30,535.0 | 97,247.4 | 2,158.3 |
| 1 | 2,820,304 | 7,353.5 | 17,432.6 | 207,678.0 | 15,284.4 | 30,568.5 | 99,445.0 | 2,149.7 |
| 3 | 8,285,104 | 7,299.1 | 16,065.4 | 208,105.0 | 15,332.4 | 30,491.5 | 98,556.7 | 2,142.1 |
| 10 | 28,025,484 | 7,327.0 | 13,524.0 | 208,712.0 | 15,498.2 | 30,765.0 | 98,409.7 | 2,148.1 |
| 30 | 81,998,686 | 7,194.8 | 10,365.0 | 209,081.0 | 16,111.8 | 31,161.5 | 97,176.7 | 2,367.8 |
| 100 | 241,688,198 | 6,857.7 | 8,722.0 | 209,106.0 | 16,389.8 | 29,626.7 | 100,643.6 | 3,745.4 |
| 300 | 721,215,500 | 9,912.6 | 11,311.2 | 211,567.0 | 19,219.1 | 24,163.4 | 104,836.2 | 10,763.9 |
| 1000 | 2,390,980,100 | 14,049.8 | 27,899.8 | 212,811.0 | 20,253.0 | 20,370.0 | 103,669.5 | 85,969.7 |

### 5.2 B：N 扫描（B_N_F0）

（Family=F0，$\alpha_{out}=200$，t=10,000,000，B=50,000,000，w_small=512）

要点：
- 点位数：6
- SJS(s+a) vs KD：query 6/6（median speedup 1.425×），wall 3/6（median speedup 0.793×）
- SJS(s+a) vs 全部模型：query 4/6，wall 3/6

**汇总对比表**

| N | $\vert J \vert$ | 最优 wall | 最优 query | SJS(s+a) wall | KD wall | wall_speedup(KD/SJS) | SJS(s+a) query | KD query | query_speedup(KD/SJS) |
|---|---|---|---|---|---|---|---|---|---|
| 100,000 | 39,707,800 | SJS-Enum / 1,473.4 ms | SJS-Enum / 16.418 ms | SJS-Sampling / 1,716.6 ms | 1,242.8 ms | 0.724× | SJS-Adaptive / 628.278 ms | 877.224 ms | 1.396× |
| 200,000 | 79,444,400 | KD-Sampling / 1,320.8 ms | SJS-Enum / 16.681 ms | SJS-Sampling / 2,204.1 ms | 1,320.8 ms | 0.599× | SJS-Adaptive / 611.066 ms | 955.244 ms | 1.564× |
| 500,000 | 198,105,800 | KD-Sampling / 1,887.3 ms | SJS-Enum / 17.260 ms | SJS-Sampling / 3,979.7 ms | 1,887.3 ms | 0.474× | SJS-Adaptive / 727.710 ms | 1,079.851 ms | 1.484× |
| 1,000,000 | 396,399,000 | KD-Sampling / 3,645.3 ms | SJS-Enum / 17.666 ms | SJS-Sampling / 6,903.1 ms | 3,645.3 ms | 0.528× | SJS-Adaptive / 1,084.055 ms | 1,545.981 ms | 1.426× |
| 2,000,000 | 792,788,600 | SJS-Sampling / 10,249.1 ms | SJS-Enum / 17.471 ms | SJS-Sampling / 10,249.1 ms | 11,572.8 ms | 1.129× | SJS-Sampling / 1,568.263 ms | 2,769.852 ms | 1.766× |
| 5,000,000 | 1,982,695,800 | SJS-Sampling / 26,308.3 ms | SJS-Enum / 18.252 ms | SJS-Sampling / 26,308.3 ms | 43,454.7 ms | 1.652× | SJS-Sampling / 1,709.221 ms | 2,804.817 ms | 1.641× |

**全模型 query 中位数表（run_sample_ms, ms）**

| N | $\vert J \vert$ | SJS-Sampling | SJS-Adaptive | SJS-Enum | RT-Sampling | RT-Adaptive | RT-Enum | KD-Sampling |
|---|---|---:|---:|---:|---:|---:|---:|---:|
| 100,000 | 39,707,800 | 714.164 | 628.278 | 16.418 | 6,221.703 | 4,810.820 | 14.417 | 877.224 |
| 200,000 | 79,444,400 | 1,072.376 | 611.066 | 16.681 | 8,885.616 | 5,881.682 | 15.604 | 955.244 |
| 500,000 | 198,105,800 | 2,481.992 | 727.710 | 17.260 | 13,307.659 | 6,071.924 | 19.202 | 1,079.851 |
| 1,000,000 | 396,399,000 | 4,230.000 | 1,084.055 | 17.666 | 14,786.623 | 6,451.850 | 28.550 | 1,545.981 |
| 2,000,000 | 792,788,600 | 1,568.263 | 2,916.970 | 17.471 | 19,899.591 | 11,397.690 | 93.144 | 2,769.852 |
| 5,000,000 | 1,982,695,800 | 1,709.221 | 4,751.221 | 18.252 | 33,179.931 | 21,038.955 | 260.054 | 2,804.817 |

**全模型 wall 中位数表（wall_ms, ms）**

| N | $\vert J \vert$ | SJS-Sampling | SJS-Adaptive | SJS-Enum | RT-Sampling | RT-Adaptive | RT-Enum | KD-Sampling |
|---|---|---:|---:|---:|---:|---:|---:|---:|
| 100,000 | 39,707,800 | 1,716.6 | 2,780.6 | 1,473.4 | 6,222.4 | 11,458.7 | 10,638.3 | 1,242.8 |
| 200,000 | 79,444,400 | 2,204.1 | 3,973.5 | 6,144.9 | 8,886.2 | 16,571.1 | 26,920.6 | 1,320.8 |
| 500,000 | 198,105,800 | 3,979.7 | 7,385.7 | 39,501.0 | 13,308.2 | 26,529.7 | 108,985.0 | 1,887.3 |
| 1,000,000 | 396,399,000 | 6,903.1 | 12,682.8 | 110,313.0 | 14,787.2 | 28,354.2 | 97,703.5 | 3,645.3 |
| 2,000,000 | 792,788,600 | 10,249.1 | 23,408.6 | 232,872.0 | 19,900.3 | 32,889.5 | 116,930.1 | 11,572.8 |
| 5,000,000 | 1,982,695,800 | 26,308.3 | 55,472.3 | 465,244.0 | 33,180.7 | 68,571.3 | 180,809.2 | 43,454.7 |

### 5.3 C：t 扫描（C_t_F0）

（Family=F0，N=1,000,000，$\alpha_{out}=200$，B=50,000,000，w_small=512）

要点：
- 点位数：7
- SJS(s+a) vs KD：query 6/7（median speedup 1.326×），wall 3/7（median speedup 0.766×）
- SJS(s+a) vs 全部模型：query 3/7，wall 3/7

**汇总对比表**

| t | $\vert J \vert$ | 最优 wall | 最优 query | SJS(s+a) wall | KD wall | wall_speedup(KD/SJS) | SJS(s+a) query | KD query | query_speedup(KD/SJS) |
|---|---|---|---|---|---|---|---|---|---|
| 1,000,000 | 396,399,000 | KD-Sampling / 3,739.5 ms | SJS-Enum / 18.507 ms | SJS-Sampling / 19,274.1 ms | 3,739.5 ms | 0.194× | SJS-Sampling / 14,150.039 ms | 14,077.618 ms | 0.995× |
| 3,000,000 | 396,399,000 | KD-Sampling / 3,695.0 ms | SJS-Enum / 18.749 ms | SJS-Sampling / 9,824.8 ms | 3,695.0 ms | 0.376× | SJS-Sampling / 3,805.071 ms | 5,114.701 ms | 1.344× |
| 10,000,000 | 396,399,000 | KD-Sampling / 3,645.3 ms | SJS-Enum / 17.666 ms | SJS-Sampling / 6,903.1 ms | 3,645.3 ms | 0.528× | SJS-Adaptive / 1,084.055 ms | 1,545.981 ms | 1.426× |
| 30,000,000 | 396,399,000 | SJS-Sampling / 7,148.6 ms | SJS-Enum / 17.685 ms | SJS-Sampling / 7,148.6 ms | 7,284.3 ms | 1.019× | SJS-Sampling / 1,778.650 ms | 2,287.836 ms | 1.286× |
| 100,000,000 | 396,399,000 | SJS-Sampling / 9,818.8 ms | SJS-Enum / 17.676 ms | SJS-Sampling / 9,818.8 ms | 11,310.2 ms | 1.152× | SJS-Sampling / 1,626.178 ms | 2,155.083 ms | 1.325× |
| 300,000,000 | 396,399,000 | SJS-Sampling / 17,862.4 ms | SJS-Enum / 17.995 ms | SJS-Sampling / 17,862.4 ms | 22,942.7 ms | 1.285× | SJS-Sampling / 1,599.025 ms | 2,115.002 ms | 1.323× |
| 1,000,000,000 | 396,399,000 | SJS-Sampling / 45,297.5 ms | SJS-Enum / 17.608 ms | SJS-Sampling / 45,297.5 ms | 67,334.0 ms | 1.487× | SJS-Sampling / 1,843.250 ms | 2,462.055 ms | 1.336× |

**全模型 query 中位数表（run_sample_ms, ms）**

| t | $\vert J \vert$ | SJS-Sampling | SJS-Adaptive | SJS-Enum | RT-Sampling | RT-Adaptive | RT-Enum | KD-Sampling |
|---|---|---:|---:|---:|---:|---:|---:|---:|
| 1,000,000 | 396,399,000 | 14,150.039 | 13,619.954 | 18.507 | 15,519.464 | 13,504.145 | 17.656 | 14,077.618 |
| 3,000,000 | 396,399,000 | 3,805.071 | 4,061.978 | 18.749 | 15,007.212 | 6,841.020 | 23.544 | 5,114.701 |
| 10,000,000 | 396,399,000 | 4,230.000 | 1,084.055 | 17.666 | 14,786.623 | 6,451.850 | 28.550 | 1,545.981 |
| 30,000,000 | 396,399,000 | 1,778.650 | 2,650.404 | 17.685 | 15,894.775 | 12,476.462 | 35.485 | 2,287.836 |
| 100,000,000 | 396,399,000 | 1,626.178 | 3,070.116 | 17.676 | 15,143.577 | 14,992.995 | 89.079 | 2,155.083 |
| 300,000,000 | 396,399,000 | 1,599.025 | 4,106.360 | 17.995 | 15,157.876 | 23,270.409 | 253.392 | 2,115.002 |
| 1,000,000,000 | 396,399,000 | 1,843.250 | 4,798.721 | 17.608 | 17,722.767 | 29,976.427 | 737.120 | 2,462.055 |

**全模型 wall 中位数表（wall_ms, ms）**

| t | $\vert J \vert$ | SJS-Sampling | SJS-Adaptive | SJS-Enum | RT-Sampling | RT-Adaptive | RT-Enum | KD-Sampling |
|---|---|---:|---:|---:|---:|---:|---:|---:|
| 1,000,000 | 396,399,000 | 19,274.1 | 25,218.7 | 115,505.0 | 15,520.0 | 33,037.1 | 97,854.0 | 3,739.5 |
| 3,000,000 | 396,399,000 | 9,824.8 | 20,620.7 | 109,436.0 | 15,007.8 | 31,018.8 | 88,316.0 | 3,695.0 |
| 10,000,000 | 396,399,000 | 6,903.1 | 12,682.8 | 110,313.0 | 14,787.2 | 28,354.2 | 97,703.5 | 3,645.3 |
| 30,000,000 | 396,399,000 | 7,148.6 | 11,972.5 | 110,380.0 | 15,895.4 | 28,478.7 | 99,041.4 | 7,284.3 |
| 100,000,000 | 396,399,000 | 9,818.8 | 20,672.2 | 110,379.0 | 15,144.2 | 28,953.2 | 105,904.3 | 11,310.2 |
| 300,000,000 | 396,399,000 | 17,862.4 | 48,002.5 | 110,380.0 | 15,158.4 | 29,424.0 | 113,015.9 | 22,942.7 |
| 1,000,000,000 | 396,399,000 | 45,297.5 | 147,254.0 | 109,570.0 | 17,723.4 | 35,310.2 | 121,075.9 | 67,334.0 |

### 5.4 D：数据族敏感性（F0 vs F1）

（N=1,000,000，$\alpha_{out}=200$，t=10,000,000，B=50,000,000，w_small=512）

要点：
- F0：SJS(s+a) vs KD：query 1/1（speedup 1.310×），wall 0/1（speedup 0.801×）
- F1：SJS(s+a) vs KD：query 1/1（speedup 3.518×），wall 1/1（speedup 2.269×）

**汇总对比表**

| Family | α_out | N | t | $\vert J \vert$ | 最优 wall | 最优 query | SJS(s+a) wall | KD wall | wall_speedup(KD/SJS) | SJS(s+a) query | KD query | query_speedup(KD/SJS) |
|---|---|---:|---:|---:|---|---|---|---|---|---|---|---|
| F0 | 200 | 1,000,000 | 10,000,000 | 396,399,000 | KD-Sampling / 3,645.3 ms | SJS-Enum / 17.666 ms | SJS-Sampling / 6,903.1 ms | 3,645.3 ms | 0.528× | SJS-Adaptive / 1,084.055 ms | 1,545.981 ms | 1.426× |
| F1 | 200 | 1,000,000 | 10,000,000 | 483,677,900 | SJS-Sampling / 9,608.2 ms | SJS-Enum / 23.816 ms | SJS-Sampling / 9,608.2 ms | 21,800.8 ms | 2.269× | SJS-Adaptive / 782.779 ms | 2,754.078 ms | 3.518× |

**全模型 query 中位数表（run_sample_ms, ms）**

| Family | $\vert J \vert$ | SJS-Sampling | SJS-Adaptive | SJS-Enum | RT-Sampling | RT-Adaptive | RT-Enum | KD-Sampling |
|---|---|---:|---:|---:|---:|---:|---:|---:|
| F0 | 396,399,000 | 4,230.000 | 1,084.055 | 17.666 | 14,786.623 | 6,451.850 | 28.550 | 1,545.981 |
| F1 | 483,677,900 | 1,816.142 | 782.779 | 23.816 | 23,392.222 | 10,972.228 | 47.689 | 2,754.078 |

**全模型 wall 中位数表（wall_ms, ms）**

| Family | $\vert J \vert$ | SJS-Sampling | SJS-Adaptive | SJS-Enum | RT-Sampling | RT-Adaptive | RT-Enum | KD-Sampling |
|---|---|---:|---:|---:|---:|---:|---:|---:|
| F0 | 396,399,000 | 6,903.1 | 12,682.8 | 110,313.0 | 14,787.2 | 28,354.2 | 97,703.5 | 3,645.3 |
| F1 | 483,677,900 | 9,608.2 | 17,877.6 | 218,219.0 | 23,392.8 | 32,455.4 | 185,681.0 | 21,800.8 |

### 5.5 E：预算诊断（E_budget_F0）

（Family=F0，N=1,000,000，$\alpha_{out}=200$，t ∈ {100,000, 300,000}，B ∈ {10,000,000, 20,000,000, 50,000,000, 100,000,000}，w_small ∈ {256, 512, 1024}）

说明：KD-Sampling 仅在 2 个点位上运行（t∈{100,000,300,000} 且 B=50,000,000 且 w_small=512）。

要点：
- 点位数：24
- SJS(s+a) vs KD：query 0/2（median speedup 0.297×），wall 0/2（median speedup 0.557×）
- SJS(s+a) vs 全部模型：query 22/24，wall 22/24

**预算诊断明细表（含 Adaptive residual 占比）**

| t | B | w_small | SJS 最优 wall 模型 | SJS 最优 wall (ms) | KD wall (ms) | wall_speedup(KD/SJS) | SJS 最优 query 模型 | SJS 最优 query (ms) | KD query (ms) | query_speedup(KD/SJS) | SJS-Adaptive query (ms) | Adaptive residual (ms) | Adaptive residual 占比 |
|---|---|---|---|---:|---:|---:|---|---:|---:|---:|---:|---:|---:|
| 100,000 | 10,000,000 | 256 | SJS-Sampling | 6,895.0 | 未运行 | 未运行 | SJS-Sampling | 10,025.494 | 未运行 | 未运行 | 10,486.709 | 2,044.732 | 0.194974 |
| 100,000 | 10,000,000 | 512 | SJS-Sampling | 6,895.1 | 未运行 | 未运行 | SJS-Sampling | 10,010.405 | 未运行 | 未运行 | 10,100.243 | 1,804.489 | 0.178661 |
| 100,000 | 10,000,000 | 1024 | SJS-Sampling | 6,894.7 | 未运行 | 未运行 | SJS-Sampling | 10,013.371 | 未运行 | 未运行 | 10,044.765 | 2,004.316 | 0.199527 |
| 100,000 | 20,000,000 | 256 | SJS-Sampling | 6,909.8 | 未运行 | 未运行 | SJS-Sampling | 10,071.287 | 未运行 | 未运行 | 10,669.081 | 1,938.343 | 0.181664 |
| 100,000 | 20,000,000 | 512 | SJS-Sampling | 6,908.2 | 未运行 | 未运行 | SJS-Sampling | 10,030.153 | 未运行 | 未运行 | 10,082.050 | 1,895.825 | 0.188047 |
| 100,000 | 20,000,000 | 1024 | SJS-Sampling | 6,909.1 | 未运行 | 未运行 | SJS-Sampling | 10,085.537 | 未运行 | 未运行 | 10,116.117 | 2,032.087 | 0.200842 |
| 100,000 | 50,000,000 | 256 | SJS-Sampling | 6,955.6 | 未运行 | 未运行 | SJS-Sampling | 10,064.936 | 未运行 | 未运行 | 9,927.693 | 1,979.446 | 0.199399 |
| 100,000 | 50,000,000 | 512 | SJS-Sampling | 6,959.5 | 3,876.1 | 0.557× | SJS-Sampling | 10,505.095 | 1,699.438 | 0.162× | 9,968.150 | 2,025.752 | 0.203035 |
| 100,000 | 50,000,000 | 1024 | SJS-Sampling | 6,959.4 | 未运行 | 未运行 | SJS-Sampling | 10,115.735 | 未运行 | 未运行 | 10,049.274 | 2,118.790 | 0.210846 |
| 100,000 | 100,000,000 | 256 | SJS-Sampling | 6,967.4 | 未运行 | 未运行 | SJS-Sampling | 10,069.286 | 未运行 | 未运行 | 10,111.894 | 2,133.765 | 0.211053 |
| 100,000 | 100,000,000 | 512 | SJS-Sampling | 6,968.3 | 未运行 | 未运行 | SJS-Sampling | 10,192.225 | 未运行 | 未运行 | 10,139.242 | 2,189.762 | 0.215964 |
| 100,000 | 100,000,000 | 1024 | SJS-Sampling | 6,968.8 | 未运行 | 未运行 | SJS-Sampling | 10,103.537 | 未运行 | 未运行 | 10,145.711 | 2,042.830 | 0.201316 |
| 300,000 | 10,000,000 | 256 | SJS-Sampling | 6,890.4 | 未运行 | 未运行 | SJS-Sampling | 6,164.401 | 未运行 | 未运行 | 6,596.262 | 595.503 | 0.090288 |
| 300,000 | 10,000,000 | 512 | SJS-Sampling | 6,890.4 | 未运行 | 未运行 | SJS-Sampling | 6,123.186 | 未运行 | 未运行 | 6,137.072 | 587.434 | 0.095730 |
| 300,000 | 10,000,000 | 1024 | SJS-Sampling | 6,890.7 | 未运行 | 未运行 | SJS-Sampling | 6,125.987 | 未运行 | 未运行 | 6,131.348 | 610.212 | 0.099523 |
| 300,000 | 20,000,000 | 256 | SJS-Sampling | 6,903.9 | 未运行 | 未运行 | SJS-Sampling | 6,070.005 | 未运行 | 未运行 | 6,065.827 | 630.741 | 0.104001 |
| 300,000 | 20,000,000 | 512 | SJS-Sampling | 6,903.4 | 未运行 | 未运行 | SJS-Sampling | 6,101.224 | 未运行 | 未运行 | 6,099.559 | 642.679 | 0.105375 |
| 300,000 | 20,000,000 | 1024 | SJS-Sampling | 6,903.8 | 未运行 | 未运行 | SJS-Sampling | 6,060.766 | 未运行 | 未运行 | 6,093.928 | 652.010 | 0.107011 |
| 300,000 | 50,000,000 | 256 | SJS-Sampling | 6,957.0 | 未运行 | 未运行 | SJS-Sampling | 6,055.227 | 未运行 | 未运行 | 6,017.629 | 681.011 | 0.113176 |
| 300,000 | 50,000,000 | 512 | SJS-Sampling | 6,959.5 | 3,876.1 | 0.557× | SJS-Sampling | 6,054.130 | 2,615.630 | 0.432× | 6,065.651 | 701.051 | 0.115587 |
| 300,000 | 50,000,000 | 1024 | SJS-Sampling | 6,960.2 | 未运行 | 未运行 | SJS-Sampling | 6,045.673 | 未运行 | 未运行 | 6,081.395 | 695.432 | 0.114354 |
| 300,000 | 100,000,000 | 256 | SJS-Sampling | 6,965.7 | 未运行 | 未运行 | SJS-Sampling | 6,019.150 | 未运行 | 未运行 | 6,086.791 | 734.182 | 0.120614 |
| 300,000 | 100,000,000 | 512 | SJS-Sampling | 6,968.9 | 未运行 | 未运行 | SJS-Sampling | 6,046.374 | 未运行 | 未运行 | 6,085.144 | 722.026 | 0.118631 |
| 300,000 | 100,000,000 | 1024 | SJS-Sampling | 6,967.8 | 未运行 | 未运行 | SJS-Sampling | 6,021.034 | 未运行 | 未运行 | 6,075.445 | 743.328 | 0.122348 |

**全模型 query 中位数表（run_sample_ms, ms）**

| t | B | w_small | $\vert J \vert$ | SJS-Sampling | SJS-Adaptive | RT-Sampling | RT-Adaptive | KD-Sampling |
|---|---|---|---|---:|---:|---:|---:|---:|
| 100,000 | 10,000,000 | 256 | 396,399,000 | 10,025.494 | 10,486.709 | 9,945.313 | 12,322.659 | 未运行 |
| 100,000 | 10,000,000 | 512 | 396,399,000 | 10,010.405 | 10,100.243 | 9,908.321 | 12,207.246 | 未运行 |
| 100,000 | 10,000,000 | 1024 | 396,399,000 | 10,013.371 | 10,044.765 | 9,931.022 | 12,215.074 | 未运行 |
| 100,000 | 20,000,000 | 256 | 396,399,000 | 10,071.287 | 10,669.081 | 9,879.346 | 12,251.864 | 未运行 |
| 100,000 | 20,000,000 | 512 | 396,399,000 | 10,030.153 | 10,082.050 | 9,841.994 | 12,093.714 | 未运行 |
| 100,000 | 20,000,000 | 1024 | 396,399,000 | 10,085.537 | 10,116.117 | 9,866.232 | 12,117.603 | 未运行 |
| 100,000 | 50,000,000 | 256 | 396,399,000 | 10,064.936 | 9,927.693 | 9,808.227 | 12,099.220 | 未运行 |
| 100,000 | 50,000,000 | 512 | 396,399,000 | 10,505.095 | 9,968.150 | 9,793.176 | 11,946.908 | 1,699.438 |
| 100,000 | 50,000,000 | 1024 | 396,399,000 | 10,115.735 | 10,049.274 | 9,791.483 | 12,077.182 | 未运行 |
| 100,000 | 100,000,000 | 256 | 396,399,000 | 10,069.286 | 10,111.894 | 9,761.318 | 12,125.442 | 未运行 |
| 100,000 | 100,000,000 | 512 | 396,399,000 | 10,192.225 | 10,139.242 | 9,764.343 | 12,064.396 | 未运行 |
| 100,000 | 100,000,000 | 1024 | 396,399,000 | 10,103.537 | 10,145.711 | 9,796.194 | 12,109.432 | 未运行 |
| 300,000 | 10,000,000 | 256 | 396,399,000 | 6,164.401 | 6,596.262 | 6,207.426 | 8,121.073 | 未运行 |
| 300,000 | 10,000,000 | 512 | 396,399,000 | 6,123.186 | 6,137.072 | 6,205.565 | 8,000.846 | 未运行 |
| 300,000 | 10,000,000 | 1024 | 396,399,000 | 6,125.987 | 6,131.348 | 6,205.482 | 7,970.995 | 未运行 |
| 300,000 | 20,000,000 | 256 | 396,399,000 | 6,070.005 | 6,065.827 | 6,069.710 | 7,911.669 | 未运行 |
| 300,000 | 20,000,000 | 512 | 396,399,000 | 6,101.224 | 6,099.559 | 6,083.846 | 7,940.463 | 未运行 |
| 300,000 | 20,000,000 | 1024 | 396,399,000 | 6,060.766 | 6,093.928 | 6,099.756 | 7,948.825 | 未运行 |
| 300,000 | 50,000,000 | 256 | 396,399,000 | 6,055.227 | 6,017.629 | 6,052.416 | 7,932.112 | 未运行 |
| 300,000 | 50,000,000 | 512 | 396,399,000 | 6,054.130 | 6,065.651 | 6,048.035 | 7,919.317 | 2,615.630 |
| 300,000 | 50,000,000 | 1024 | 396,399,000 | 6,045.673 | 6,081.395 | 6,055.886 | 7,945.568 | 未运行 |
| 300,000 | 100,000,000 | 256 | 396,399,000 | 6,019.150 | 6,086.791 | 6,065.488 | 7,911.816 | 未运行 |
| 300,000 | 100,000,000 | 512 | 396,399,000 | 6,046.374 | 6,085.144 | 6,068.776 | 7,980.880 | 未运行 |
| 300,000 | 100,000,000 | 1024 | 396,399,000 | 6,021.034 | 6,075.445 | 6,042.347 | 7,918.093 | 未运行 |

**全模型 wall 中位数表（wall_ms, ms）**

| t | B | w_small | $\vert J \vert$ | SJS-Sampling | SJS-Adaptive | RT-Sampling | RT-Adaptive | KD-Sampling |
|---|---|---|---|---:|---:|---:|---:|---:|
| 100,000 | 10,000,000 | 256 | 396,399,000 | 6,895.0 | 7,556.0 | 9,945.9 | 22,018.4 | 未运行 |
| 100,000 | 10,000,000 | 512 | 396,399,000 | 6,895.1 | 7,201.5 | 9,908.9 | 24,180.6 | 未运行 |
| 100,000 | 10,000,000 | 1024 | 396,399,000 | 6,894.7 | 7,115.6 | 9,931.7 | 22,583.9 | 未运行 |
| 100,000 | 20,000,000 | 256 | 396,399,000 | 6,909.8 | 8,001.2 | 9,880.0 | 23,945.0 | 未运行 |
| 100,000 | 20,000,000 | 512 | 396,399,000 | 6,908.2 | 7,370.9 | 9,842.6 | 24,207.3 | 未运行 |
| 100,000 | 20,000,000 | 1024 | 396,399,000 | 6,909.1 | 7,494.4 | 9,866.8 | 24,239.0 | 未运行 |
| 100,000 | 50,000,000 | 256 | 396,399,000 | 6,955.6 | 7,313.4 | 9,808.8 | 23,730.5 | 未运行 |
| 100,000 | 50,000,000 | 512 | 396,399,000 | 6,959.5 | 7,384.7 | 9,793.7 | 23,877.8 | 3,876.1 |
| 100,000 | 50,000,000 | 1024 | 396,399,000 | 6,959.4 | 7,431.0 | 9,792.1 | 24,545.8 | 未运行 |
| 100,000 | 100,000,000 | 256 | 396,399,000 | 6,967.4 | 7,493.0 | 9,761.9 | 24,290.3 | 未运行 |
| 100,000 | 100,000,000 | 512 | 396,399,000 | 6,968.3 | 7,503.8 | 9,764.9 | 23,762.2 | 未运行 |
| 100,000 | 100,000,000 | 1024 | 396,399,000 | 6,968.8 | 7,502.0 | 9,796.8 | 24,587.9 | 未运行 |
| 300,000 | 10,000,000 | 256 | 396,399,000 | 6,890.4 | 7,411.8 | 6,208.0 | 19,944.0 | 未运行 |
| 300,000 | 10,000,000 | 512 | 396,399,000 | 6,890.4 | 6,965.1 | 6,206.1 | 22,003.5 | 未运行 |
| 300,000 | 10,000,000 | 1024 | 396,399,000 | 6,890.7 | 6,948.2 | 6,206.0 | 20,801.7 | 未运行 |
| 300,000 | 20,000,000 | 256 | 396,399,000 | 6,903.9 | 7,379.6 | 6,070.3 | 19,885.4 | 未运行 |
| 300,000 | 20,000,000 | 512 | 396,399,000 | 6,903.4 | 7,377.4 | 6,084.4 | 19,890.8 | 未运行 |
| 300,000 | 20,000,000 | 1024 | 396,399,000 | 6,903.8 | 7,385.0 | 6,100.3 | 19,849.4 | 未运行 |
| 300,000 | 50,000,000 | 256 | 396,399,000 | 6,957.0 | 7,399.8 | 6,053.0 | 20,083.4 | 未运行 |
| 300,000 | 50,000,000 | 512 | 396,399,000 | 6,959.5 | 7,464.9 | 6,048.6 | 19,837.8 | 3,876.1 |
| 300,000 | 50,000,000 | 1024 | 396,399,000 | 6,960.2 | 7,440.6 | 6,056.5 | 19,954.9 | 未运行 |
| 300,000 | 100,000,000 | 256 | 396,399,000 | 6,965.7 | 7,460.2 | 6,066.1 | 19,988.5 | 未运行 |
| 300,000 | 100,000,000 | 512 | 396,399,000 | 6,968.9 | 7,469.2 | 6,069.4 | 19,879.7 | 未运行 |
| 300,000 | 100,000,000 | 1024 | 396,399,000 | 6,967.8 | 7,461.3 | 6,043.0 | 19,961.3 | 未运行 |

### 5.6 F：高密度补充（F_high_alpha_F0）

（Family=F0，N=1,000,000，t=1,000,000，B=50,000,000，w_small=512）

要点：
- 点位数：3
- SJS(s+a) vs KD：query 3/3（median speedup 74.568×），wall 3/3（median speedup 0.951×）
- SJS(s+a) vs 全部模型：query 0/3，wall 1/3

**汇总对比表**

| α_out | $\vert J \vert$ | 最优 wall | 最优 query | SJS(s+a) wall | KD wall | wall_speedup(KD/SJS) | SJS(s+a) query | KD query | query_speedup(KD/SJS) |
|---|---|---|---|---|---|---|---|---|---|
| 1000 | 1,953,920,800 | SJS-Sampling / 18,967.9 ms | RT-Adaptive / 163.185 ms | SJS-Sampling / 18,967.9 ms | 19,606.2 ms | 1.034× | SJS-Sampling / 167.910 ms | 7,594.282 ms | 45.235× |
| 3000 | 5,861,671,100 | SJS-Sampling / 34,476.6 ms | RT-Adaptive / 165.190 ms | SJS-Sampling / 34,476.6 ms | 35,368.8 ms | 1.026× | SJS-Sampling / 170.022 ms | 12,679.907 ms | 74.576× |
| 10000 | 19,527,267,800 | SJS-Sampling / 108,918.7 ms | RT-Adaptive / 166.867 ms | SJS-Sampling / 108,918.7 ms | 98,842.4 ms | 0.907× | SJS-Sampling / 173.485 ms | 22,879.664 ms | 131.874× |

**全模型 query 中位数表（run_sample_ms, ms）**

| α_out | $\vert J \vert$ | SJS-Sampling | SJS-Adaptive | RT-Sampling | RT-Adaptive | KD-Sampling |
|---|---|---:|---:|---:|---:|---:|
| 1000 | 1,953,920,800 | 167.910 | 841.463 | 1,192.003 | 163.185 | 7,594.282 |
| 3000 | 5,861,671,100 | 170.022 | 1,429.282 | 3,363.613 | 165.190 | 12,679.907 |
| 10000 | 19,527,267,800 | 173.485 | 5,569.111 | 10,412.332 | 166.867 | 22,879.664 |

**全模型 wall 中位数表（wall_ms, ms）**

| α_out | $\vert J \vert$ | SJS-Sampling | SJS-Adaptive | RT-Sampling | RT-Adaptive | KD-Sampling |
|---|---|---:|---:|---:|---:|---:|
| 1000 | 1,953,920,800 | 18,967.9 | 28,353.0 | 25,561.0 | 25,377.7 | 19,606.2 |
| 3000 | 5,861,671,100 | 34,476.6 | 64,384.6 | 25,407.6 | 25,924.2 | 35,368.8 |
| 10000 | 19,527,267,800 | 108,918.7 | 208,573.5 | 25,407.4 | 26,638.0 | 98,842.4 |